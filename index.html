<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="./assets/style.css" rel="stylesheet">
    <link href="./assets/prism/prism.css" rel="stylesheet">
    <link href="./assets/line-number/line-number.css" rel="stylesheet">
    <script src="./assets/prism/prism.js">
    </script>
    <script src="./assets/line-number/line-number.js">
    </script>
    <title> Affirm Code Snippets
    </title>
</head>

<body>
    <div class="container-fluid wordpressFunctionAP">
        <div class="container">
            <div class="row">
                <div class="col-md-6 right">
                    <ul>
                        <li id="cmnFunc">
                            <div>
                                <span class="text"> JavaScript Code </span>
                                <span class="function">
                                    <pre class="line-numbers"><code class="language-javascript">                    ********
            Required jQuery For This Code
                    ********
$(document).ready(function () {
    _affirm_config = {
        public_api_key: "Your Api Key",
        script: "https://cdn1-sandbox.affirm.com/js/v2/affirm.js"
    };
    (function (m, g, n, d, a, e, h, c) {
        var b = m[n] || {},
            k = document.createElement(e),
            p = document.getElementsByTagName(e)[0],
            l = function (a, b, c) {
                return function () {
                    a[b]._.push([c, arguments])
                }
            };
        b[d] = l(b, d, "set");
        var f = b[d];
        b[a] = {};
        b[a]._ = [];
        f._ = [];
        b._ = [];
        b[a][h] = l(b, a, h);
        b[c] = function () {
            b._.push([h, arguments])
        };
        a = 0;
        for (c = "set add save post open empty reset on off trigger ready setProduct".split(" "); a < c.length; a++) f[c[a]] = l(b, d, c[a]);
        a = 0;
        for (c = ["get", "token", "url", "items"]; a < c.length; a++) f[c[a]] = function () { };
        k.async = !0;
        k.src = g[e];
        p.parentNode.insertBefore(k, p);
        delete g[e];
        f(g);
        m[n] = b
    })(window, _affirm_config, "affirm", "checkout", "ui", "script", "ready", "jsReady");
    var data = {
        "merchant": {
            "user_confirmation_url": "Your Confirmation Url Where Page Redirected After Payment Confirm",
            "user_cancel_url": "Your Cancel Url Where Page Redirected After Payment Cancel",
            "user_confirmation_url_action": "POST",
            "name": "Name Your Site / Company"
        },
        "shipping": {
            "name": {
                "first": User First Name,
                "last": User Last Name
            },
            "address": {
                "line1": User House Number,
                "line2": User Street,
                "city": User City,
                "state": User State,
                "zipcode": User Zip,
                "country": "USA"
            },
            "phone_number": User Phone,
            "email": User Email
        },
        "items": [{
            "display_name": "Displayed Name Of Item",
            "sku": Sku Of Item,
            "unit_price": Unit Price Of Item,
            "qty": Quantity Of Item
        }],
        "currency": "USD",
        'shipping_amount': Shipping Amount Of Item,
        'tax_amount': Tax Amount Of Item,
        "total": Total Amount Of Item
    };
    $("Button Id Or Class").click(function (e) {
        affirm.checkout(data);
        affirm.checkout.open();
    });
});</code> 
                                            </pre>
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-md-6 left">
                    <ul>
                        <li id="cmnFunc">
                            <div>
                                <span class="text"> Affirm Links </span>
                                <span class="function">
                                    <pre class="line-numbers"><code class="language-javascript">Documentation   <a href="https://docs.affirm.com/platforms/docs/platforms-quickstart">https://docs.affirm.com/platforms/docs/platforms-quickstart</a>
Dashboard       <a
                                            href="https://sandbox.affirm.com/dashboard/home">https://sandbox.affirm.com/dashboard/home</a>
API Details     <a href="https://sandbox.affirm.com/dashboard/apikeys">https://sandbox.affirm.com/dashboard/apikeys</a>
                                
                            ********
                Use Below Details For Testing Purpose
                            ********
Temp Number     202-555-0108
OTP             1234
</code> 
</pre>
                                </span>
                            </div>
                        </li>
                        <li id="cmnFunc">
                            <div>
                                <span class="text"> PHP Code To Save Details In DataBase</span>
                                <span class="function">
                                    <pre class="line-numbers"><code class="language-javascript">if (!isset($_POST['checkout_token'])) {
$_POST['checkout_token'] = 'null';
$status = 'failed';
} else {
$status = 'completed';
}
if ($_POST['checkout_token'] == "null") {
$checkout_token = 'NA';
} else {
$checkout_token = $_POST['checkout_token'];
$data = array(
"status" => $status,
"checkout_token" => $checkout_token
);
$db->insert ('Your Table Name', $data);</code> 
                                                            </pre>
                                </span>
                            </div>
                        </li>
                        <li id="cmnFunc">
                            <div>
                                <span class="text">Authorize Transaction Code</span>
                                <span class="function">
                                    <pre class="line-numbers"><code class="language-javascript">$curl = curl_init();
curl_setopt_array($curl, array(
CURLOPT_URL => 'https://sandbox.affirm.com/api/v1/transactions',
CURLOPT_RETURNTRANSFER => true,
CURLOPT_ENCODING => '',
CURLOPT_MAXREDIRS => 10,
CURLOPT_TIMEOUT => 0,
CURLOPT_FOLLOWLOCATION => true,
CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
CURLOPT_CUSTOMREQUEST => 'POST',
CURLOPT_POSTFIELDS =>'{ "transaction_id":"'.$checkout_token.'" }',
CURLOPT_HTTPHEADER => array('Content-Type: application/json','Authorization: Basic WjJFMkZHMFk1VFQwVk5JWDpCSDJHQ2FLTndQUDVkdkxvQmdtT2NIalJWWHFPWFlJRQ==','Cookie: 3060738.3440491=1b23936a-a298-427f-bf96-68ae317affac; affirm-csrf-token=555bff4c-cd71-40f4-c03f-433d9827cf73;t_v2_s=eyIgYiI6Ik1XSXlNemt6Tm1FdFlUSTVPQzAwTWpkbUxXSm1PVFl0TmpoaFpUTXhOMkZtWm1GaiJ9.FrpxDQ.tZA8EPMUEdNgm_tmv9gE_-zeUYc;tracker_device=1b23936a-a298-427f-bf96-68ae317affac'),
));
$response = curl_exec($curl);
curl_close($curl);
$response_text = json_decode($response, true);
$order_id = $response_text['id'];</code> 
                                                                                    </pre>
                                </span>
                            </div>
                        </li>
                        <li id="cmnFunc">
                            <div>
                                <span class="text">Capture Payment Code</span>
                                <span class="function">
                                    <pre class="line-numbers"><code class="language-javascript">$curl_order = curl_init();
curl_setopt_array($curl_order, [
CURLOPT_URL => "https://sandbox.affirm.com/api/v2/charges/".$order_id."/capture",
CURLOPT_RETURNTRANSFER => true,
CURLOPT_ENCODING => "",
CURLOPT_MAXREDIRS => 10,
CURLOPT_TIMEOUT => 30,
CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
CURLOPT_CUSTOMREQUEST => "POST",
CURLOPT_HTTPHEADER => ["accept: */*","authorization: Basic WjJFMkZHMFk1VFQwVk5JWDpCSDJHQ2FLTndQUDVkdkxvQmdtT2NIalJWWHFPWFlJRQ==","content-type: application/json"],
]);
$order_response = curl_exec($curl_order);
$order_err = curl_error($curl_order);
curl_close($curl_order);</code> 
                                                                                                            </pre>
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js">
        </script>
</body>

</html>
